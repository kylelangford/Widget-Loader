{"version":3,"sources":["block-loader.js"],"names":["widgetLoader","_addAssets","data","css","_addCSS","js","_addJS","forEach","index","filename","head","style","document","getElementsByTagName","createElement","href","type","rel","append","script","src","load","url","callback","request","XMLHttpRequest","Error","onload","status","console","log","json","JSON","parse","responseText","open","send","newDiv","innerHTML","html","querySelector","target","appendChild","replace"],"mappings":"AAKA,IAAIA,aAAe,WACjB,aAEA,IAwCIC,EAAa,SAASC,GACpBA,EAAKC,KACPC,EAAQF,EAAKC,KAGXD,EAAKG,IACPC,EAAOJ,EAAKG,KAKZD,EAAU,SAASD,GACrBA,EAAII,QAAQ,SAASC,GAGrB,IAAgBC,EACVC,EACAC,EAFUF,EAFPD,EAGHE,EAAOE,SAASC,qBAAqB,QAAQ,IAC7CF,EAAQC,SAASE,cAAc,SAC7BC,KAAON,EACbE,EAAMK,KAAO,WACbL,EAAMM,IAAM,aACZP,EAAKQ,OAAOP,MAKZL,EAAS,SAASD,GACpBA,EAAGE,QAAQ,SAASC,GAGpB,IAAmBC,EACbC,EACAS,EAFaV,EAFPD,EAGNE,EAAOE,SAASC,qBAAqB,QAAQ,IAC7CM,EAASP,SAASE,cAAc,WAC7BM,IAAMX,EACbU,EAAOH,KAAO,kBACdN,EAAKQ,OAAOC,MAIhB,MAAO,CACLE,KAhFY,SAASC,EAAKC,GAC1B,IAAIC,EAAU,IAAIC,eAElB,GAAmB,iBAARH,EACT,MAAM,IAAII,MAAM,gBAAiBJ,GAC5B,GAAwB,mBAAbC,EAChB,MAAM,IAAIG,MAAM,wCAAyCH,GAG3DC,EAAQG,OAAS,WACf,GAAsB,KAAlBH,EAAQI,QAAiBJ,EAAQI,OAAS,IAAK,CACjDC,QAAQC,IAAI,aACZ,IAAIC,EAAOC,KAAKC,MAAMT,EAAQU,cAC9BX,EAASQ,QAETF,QAAQC,IAAI,0BAIhBN,EAAQW,KAAK,MAAOb,GAAK,GACzBE,EAAQY,QA6DRlB,OAzDe,SAASa,GACxB,IAAI7B,EAAO6B,EACPM,EAASzB,SAASE,cAAc,OACpCb,EAAWC,GACXmC,EAAOC,UAAYpC,EAAKqC,KACxB3B,SAAS4B,cAActC,EAAKuC,QAAQC,YAAYL,IAqDhDM,QAjDgB,SAASZ,GACzB,IAAI7B,EAAO6B,EACX9B,EAAWC,GACXU,SAAS4B,cAActC,EAAKuC,QAAQH,UAAYpC,EAAKqC,OAvCtC","file":"../block-loader.js","sourcesContent":["/*\nWidget Loader\nAuthor: Kyle Langford\n*/\n\nvar widgetLoader = (function() {\n  'use strict';\n\n  var getData = function(url, callback) {\n    var request = new XMLHttpRequest();\n\n    if (typeof url !== 'string') {\n      throw new Error('Invalid URL: ', url);\n    } else if (typeof callback !== 'function') {\n      throw new Error('Callback provided is not a function: ', callback);\n    }\n\n    request.onload = function() {\n      if (request.status >= 200 && request.status < 400) {\n        console.log('Connected');\n        var json = JSON.parse(request.responseText);\n        callback(json);\n      } else {\n        console.log('Connection has Failed');\n      }\n    };\n\n    request.open('GET', url, true);\n    request.send();\n  };\n\n  // Append HTML to target\n  var appendHTML = function(json) {\n    var data = json;\n    var newDiv = document.createElement('div');\n    _addAssets(data);\n    newDiv.innerHTML = data.html;\n    document.querySelector(data.target).appendChild(newDiv);\n  };\n\n  // Replace HTML to target\n  var replaceHTML = function(json) {\n    var data = json;\n    _addAssets(data);\n    document.querySelector(data.target).innerHTML = data.html;\n  };\n\n  // Checks to see if assets are available\n  var _addAssets = function(data) {\n    if (data.css) {\n      _addCSS(data.css);\n    }\n\n    if (data.js) {\n      _addJS(data.js);\n    }\n  };\n\n  // Add CSS files to head\n  var _addCSS = function(css) {\n    css.forEach(function(index) {\n      addCSS(index);\n    });\n    function addCSS(filename) {\n      var head = document.getElementsByTagName('head')[0];\n      var style = document.createElement('link');\n      style.href = filename;\n      style.type = 'text/css';\n      style.rel = 'stylesheet';\n      head.append(style);\n    }\n  };\n\n  // Add JS files to head\n  var _addJS = function(js) {\n    js.forEach(function(index) {\n      addScript(index);\n    });\n    function addScript(filename) {\n      var head = document.getElementsByTagName('head')[0];\n      var script = document.createElement('script');\n      script.src = filename;\n      script.type = 'text/javascript';\n      head.append(script);\n    }\n  };\n\n  return {\n    load: getData,\n    append: appendHTML,\n    replace: replaceHTML,\n  };\n})();\n"]}