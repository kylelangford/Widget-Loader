{"version":3,"sources":["block-loader.js"],"names":["widgetLoader","_addAssets","data","css","_addCSS","js","_addJS","forEach","index","filename","head","style","document","getElementsByTagName","createElement","href","type","rel","append","script","src","load","url","callback","request","XMLHttpRequest","Error","onload","status","console","log","json","JSON","parse","responseText","open","send","newDiv","innerHTML","html","querySelector","target","appendChild","replace"],"mappings":"AA2CA,IAAIA,aAAe,WAEjB,aAEA,IAyCIC,EAAa,SAASC,GACpBA,EAAKC,KACPC,EAAQF,EAAKC,KAGXD,EAAKG,IACPC,EAAOJ,EAAKG,KAKZD,EAAU,SAASD,GACrBA,EAAII,QAAQ,SAAUC,GAGtB,IAAgBC,EACXC,EACAC,EAFWF,EAFPD,EAGJE,EAAOE,SAASC,qBAAqB,QAAQ,IAC7CF,EAAQC,SAASE,cAAc,SAC7BC,KAAON,EACbE,EAAMK,KAAO,WACbL,EAAMM,IAAM,aACZP,EAAKQ,OAAOP,MAKXL,EAAS,SAASD,GACpBA,EAAGE,QAAQ,SAASC,GAGpB,IAAmBC,EACdC,EACAS,EAFcV,EAFPD,EAGPE,EAAOE,SAASC,qBAAqB,QAAQ,IAC7CM,EAASP,SAASE,cAAc,WAC7BM,IAAMX,EACbU,EAAOH,KAAO,kBACdN,EAAKQ,OAAOC,MAIf,MAAO,CACLE,KAjFY,SAASC,EAAKC,GAC1B,IAAIC,EAAU,IAAIC,eAElB,GAAmB,iBAARH,EACT,MAAM,IAAII,MAAM,gBAAiBJ,GAC5B,GAAwB,mBAAbC,EAChB,MAAM,IAAIG,MAAM,wCAAyCH,GAI3DC,EAAQG,OAAS,WACf,GAAsB,KAAlBH,EAAQI,QAAiBJ,EAAQI,OAAS,IAAK,CACjDC,QAAQC,IAAI,aACZ,IAAIC,EAAOC,KAAKC,MAAMT,EAAQU,cAC9BX,EAASQ,QAETF,QAAQC,IAAI,0BAIhBN,EAAQW,KAAK,MAAOb,GAAK,GACzBE,EAAQY,QA6DRlB,OAzDe,SAASa,GACxB,IAAI7B,EAAO6B,EACPM,EAASzB,SAASE,cAAc,OACpCb,EAAWC,GACXmC,EAAOC,UAAYpC,EAAKqC,KACxB3B,SAAS4B,cAActC,EAAKuC,QAAQC,YAAYL,IAqDhDM,QAjDgB,SAASZ,GACzB,IAAI7B,EAAO6B,EACX9B,EAAWC,GACXU,SAAS4B,cAActC,EAAKuC,QAAQH,UAAYpC,EAAKqC,OAzCtC","file":"../block-loader.js","sourcesContent":["/*\nBlock Injector\nAuthor: Kyle Langford\n\nUse:\n===\n<script src=\"http://hlthlink.com/widgets/lw-block-loader.js\" type=\"text/javascript\"></script>\n\n<script>\n  \n  Linkwell.load(url, callback);\n\n  Linkwell.load('data/form.json', Linkwell.append);\n\n  Linkwell.load('data/form.json', function(data) {\n    data.target = \"New Target\"\n    console.log(data);\n  });\n\n</script>\n\nJSON Example:\n=============\nNotes: Make sure to escape double quotes '\\\"'\n=============\n{\n  \"name\" : \"mc_subscribe_form\",\n  \"target\" : \"#element\",\n  \"html\" : \"<div id=\\\"element\\\"></div>\",\n  \"css\" : [\n    \"css/nvi-subscribe-form.css\"\n  ],\n  \"js\" : [\n    \"js/form-submit.js\"\n  ]\n}\n\nResources:\n==========\nhttps://kangax.github.io/html-minifier/\n\n*/\n\nvar widgetLoader = (function() {\n\n  'use strict';\n\n  var getData = function(url, callback) {\n    var request = new XMLHttpRequest();\n\n    if (typeof url !== 'string') {\n      throw new Error('Invalid URL: ', url);\n    } else if (typeof callback !== 'function') {\n      throw new Error('Callback provided is not a function: ', callback);\n      // Show list of possible methods\n    }\n\n    request.onload = function() {\n      if (request.status >= 200 && request.status < 400) {\n        console.log('Connected');\n        var json = JSON.parse(request.responseText);\n        callback(json);\n      } else {\n        console.log('Connection has Failed');\n      }\n    };\n\n    request.open('GET', url, true);\n    request.send();\n  }\n\n  // Append HTML to target\n  var appendHTML = function(json) {\n    var data = json;\n    var newDiv = document.createElement('div');\n    _addAssets(data);\n    newDiv.innerHTML = data.html;\n    document.querySelector(data.target).appendChild(newDiv);\n  }\n\n  // Replace HTML to target\n  var replaceHTML = function(json) {\n    var data = json;\n    _addAssets(data);\n    document.querySelector(data.target).innerHTML = data.html;\n  }\n  \n  // Checks to see if assets are available\n  var _addAssets = function(data) {\n    if (data.css) {\n      _addCSS(data.css);\n    }\n\n    if (data.js) {\n      _addJS(data.js);\n    }\n  }\n\n  // Add CSS files to head\n  var _addCSS = function(css) {\n    css.forEach(function (index) {\n      addCSS(index);\n    });\n    function addCSS(filename){\n     var head = document.getElementsByTagName('head')[0];\n     var style = document.createElement('link');\n     style.href = filename;\n     style.type = 'text/css';\n     style.rel = 'stylesheet';\n     head.append(style);\n    }\n  }\n\n  // Add JS files to head\n  var _addJS = function(js) {\n    js.forEach(function(index){\n      addScript(index);\n    });\n    function addScript(filename) {\n     var head = document.getElementsByTagName('head')[0];\n     var script = document.createElement('script');\n     script.src = filename;\n     script.type = 'text/javascript';\n     head.append(script);\n    }\n  }\n\n  return {\n    load: getData,\n    append: appendHTML,\n    replace: replaceHTML\n  };\n\n})();\n\n\n"]}